<mat-card *ngIf="editMode" class="cardWithShadow">
  <ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" size = "medium" color = "#fff" type = "ball-atom" [fullScreen] = "true"><p style="color: white" > Loading... </p></ngx-spinner>
  <mat-card-content class="p-32 manage-page">
    <mat-card-title class=" b-b-1">
      <div class="row">
        <div class="col-8 col-md-6 title"> 
          <h3>Edit Company Info</h3>
        </div>
        <div class="col-4 col-md-6 align-end btn-group">
            <button mat-raised-button color="primary" 
              class="m-t-12 m-b-12 m-r-3" 
              [disabled]="!companyForm?.valid"
              (click)="addCompany()">Save</button>
          <button mat-raised-button  color="warn" class="m-t-12 m-b-12" (click)="cancel()">Cancel</button>
        </div>
      </div>
    </mat-card-title>

  
    <form [formGroup]="companyForm"> 
     
      <mat-card class="b-1 shadow-none">
        <mat-card-header>
          <mat-card-title>Company Details</mat-card-title>
        </mat-card-header>
        <mat-card-content class="b-t-1">
          <div class="row m-t-32">
            <div class="col-md-3">
              <h4 class="w-100">Company Info</h4>
            </div>
    
            <div class="col-md-3">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Company name</mat-label>
                <input matInput type="text" formControlName="name">
                <mat-hint class="error" *ngIf="companyForm?.get('name')?.invalid && companyForm?.get('name')?.touched">
                  *Company name is required
                </mat-hint>
              </mat-form-field>
            </div>
            <div class="col-md-3">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>VAT number</mat-label>
                <input matInput type="text" formControlName="VATNumber">
                <mat-hint class="error" *ngIf="companyForm?.get('VATNumber')?.invalid && companyForm?.get('VATNumber')?.touched">
                  *VAT Number is required
                </mat-hint>
              </mat-form-field>
            </div>
            <div class="col-md-3">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Registration No</mat-label>
                <input matInput type="text" formControlName="registrationNumber">
                <mat-hint class="error" *ngIf="companyForm?.get('registrationNumber')?.invalid && companyForm?.get('registrationNumber')?.touched">
                  *Registration number is required
                </mat-hint>
              </mat-form-field>
            </div>
          </div>

          <div class="row">
            <div class="col-md-3">
              <h4 class="w-100">Full Name</h4>
            </div>
    
            <div class="col-md-4">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Phone number</mat-label>
                <input matInput type="text" formControlName="phoneNumber">
                <mat-hint class="error" *ngIf="companyForm?.get('phoneNumber')?.invalid && companyForm?.get('phoneNumber')?.touched">
                  *Phone number is required
                </mat-hint>
              </mat-form-field>
            </div>
            <div class="col-md-5">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Email address</mat-label>
                <input matInput type="email" formControlName="emailAddress">
                <mat-hint class="error" *ngIf="companyForm?.get('emailAddress')?.invalid && companyForm?.get('emailAddress')?.touched">
                  *Email address is required
                </mat-hint>
              </mat-form-field>
            </div> 
          </div>

          <div class="row">
            <div class="col-md-3">
              <h4 class="w-100">Website</h4>
            </div>
    
            <div class="col-md-9">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Company website</mat-label>
                <input matInput type="text" formControlName="website">
                <mat-hint class="error" *ngIf="companyForm?.get('website')?.invalid && companyForm?.get('website')?.touched">
                  *Webite url is required
                </mat-hint>
              </mat-form-field>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
 
      <mat-card class="b-1 shadow-none">
        <mat-card-header>
          <mat-card-title>Banking Details</mat-card-title>
        </mat-card-header>
        <mat-card-content class="b-t-1">
          <div class="row m-t-12">
            <div class="col-md-3">
              <h4 class="w-100">Account Number</h4>
            </div>
    
            <div class="col-md-9">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Account number</mat-label>
                <input matInput type="text" formControlName="accountNumber">
                <mat-hint class="error" *ngIf="companyForm?.get('accountNumber')?.invalid && companyForm?.get('accountNumber')?.touched">
                  *Account number is required
                </mat-hint>
              </mat-form-field>
            </div>   
          </div>
    
          <div class="row m-t-12">
            <div class="col-md-3">
              <h4 class="w-100">Bank Info</h4>
            </div>
    
            <div class="col-md-5">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Branch name</mat-label>
                <input matInput type="text" formControlName="bankName">
                <mat-hint class="error" *ngIf="companyForm?.get('bankName')?.invalid && companyForm?.get('bankName')?.touched">
                  *Branch name is required
                </mat-hint>
              </mat-form-field>
            </div>
            <div class="col-md-4">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Branch code</mat-label>
                <input matInput type="text" formControlName="branchCode">
                <mat-hint class="error" *ngIf="companyForm?.get('branchCode')?.invalid && companyForm?.get('branchCode')?.touched">
                  *Branch code is required
                </mat-hint>
              </mat-form-field>
            </div>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="b-1 shadow-none">
        <mat-card-header>
          <mat-card-title>Contact Person</mat-card-title>
        </mat-card-header>
        <mat-card-content class="b-t-1"> 
          <div class="row m-t-12">
            <div class="col-md-3">
              <h4 class="w-100">Title/Gender</h4>
            </div> 
    
            <div class="col-md-4">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Title</mat-label>
                <select matNativeControl required formControlName="contactPersonTitle">
                  <option *ngFor="let val of titles" value="{{val}}">{{val}}</option> 
                </select>
              </mat-form-field>
            </div> 

            <div class="col-md-5">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Gender</mat-label>
                <select matNativeControl required formControlName="contactPersonGender">
                  <option *ngFor="let val of gender" value="{{val}}">{{val}}</option> 
                </select>
              </mat-form-field>
            </div> 
          </div>

          <div class="row m-t-12">
            <div class="col-md-3">
              <h4 class="w-100">Full Name</h4>
            </div> 
             
            <div class="col-md-4">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>First name</mat-label>
                <input matInput type="text" formControlName="contactPersonFirstName">
                <mat-hint class="error" *ngIf="companyForm?.get('contactPersonFirstName')?.invalid && companyForm?.get('contactPersonFirstName')?.touched">
                  *First name is required
                </mat-hint>
              </mat-form-field>
            </div> 
    
            <div class="col-md-5">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Last name</mat-label>
                <input matInput type="text" formControlName="contactPersonLastName">
                <mat-hint class="error" *ngIf="companyForm?.get('contactPersonLastName')?.invalid && companyForm?.get('contactPersonLastName')?.touched">
                  *Last name is required
                </mat-hint>
              </mat-form-field>
            </div> 
          </div>

          <div class="row m-t-12">
            <div class="col-md-3">
              <h4 class="w-100">Contact Details</h4>
            </div>
    
            <div class="col-md-4">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Phone number</mat-label>
                <input matInput type="text" formControlName="contactPersonPhoneNumber">
                <mat-hint class="error" *ngIf="companyForm?.get('contactPersonPhoneNumber')?.invalid && companyForm?.get('contactPersonPhoneNumber')?.touched">
                  *Phone number is required
                </mat-hint>
              </mat-form-field>
            </div>
            <div class="col-md-5">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Email address</mat-label>
                <input matInput type="email" formControlName="contactPersonEmail">
                <mat-hint class="error" *ngIf="companyForm?.get('contactPersonEmail')?.invalid && companyForm?.get('contactPersonEmail')?.touched">
                  *Email address is required
                </mat-hint>
              </mat-form-field>
            </div>
          </div>

          <div class="row m-t-12">
            <div class="col-md-3">
              <h4 class="w-100">Company Address</h4>
            </div>
    
            <div class="col-md-4">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Billing address</mat-label>
                <textarea matInput rows="5" formControlName="billingAddress"></textarea>
                <mat-hint class="error" *ngIf="companyForm?.get('billingAddress')?.invalid && companyForm?.get('billingAddress')?.touched">
                  *Billing address is required
                </mat-hint>
              </mat-form-field>
              <mat-checkbox color="primary" (change)="copyShippingAddress($event.checked)">Shipping address is the same as Biling Address</mat-checkbox>
            </div>
    
            <div class="col-md-5">
              <mat-form-field class="w-100" appearance="outline">
                <mat-label>Shipping address</mat-label>
                <textarea matInput rows="5" formControlName="shippingAddress"></textarea>
                <mat-hint class="error" *ngIf="companyForm?.get('shippingAddress')?.invalid && companyForm?.get('shippingAddress')?.touched">
                  *Shipping address is required
                </mat-hint>
              </mat-form-field>
            </div>
          </div>
    
        </mat-card-content>
      </mat-card>
    </form>
 
  </mat-card-content>
</mat-card>


<mat-card *ngIf="!editMode" class="cardWithShadow">
  <mat-card-content class="p-24">
    <mat-card-title class=" b-b-1">
      <div class="row">
        <div class="col-md-9 col-sm-6 title"> <h3>My Companies</h3></div>
        <div class="col-md-3 col-sm-6 align-end">
          <button mat-raised-button color="primary" class="m-t-12 m-b-12" (click)="addNewCompany()">Add Company</button>
        </div>
      </div>
    </mat-card-title>
    
    <div class="table-responsive m-t-16">
      <table mat-table [dataSource]="company" class="w-100">
        <!-- Logo Column -->
        <ng-container matColumnDef="companyLogo">
          <th
            mat-header-cell
            *matHeaderCellDef
            class="f-w-600 mat-subtitle-1 f-s-14"
          >
            Logo
          </th>
          <td mat-cell *matCellDef="let element">
            <div class="d-flex align-items-center">
              <img
                src="../../../../assets/images/customers/customer-1.svg"
                alt="users"
                width="60"
              />
            </div>
          </td>
        </ng-container>

        <!-- Full name Column --> 
        <ng-container matColumnDef="contactPersonName">
          <th
            mat-header-cell
            *matHeaderCellDef
            class="f-w-600 mat-subtitle-1 f-s-14"
          >
          Name
          </th>
          <td mat-cell *matCellDef="let element" class="mat-body-1">
            {{ element.name }}  
          </td>
        </ng-container>

        <!-- Company Name Column -->
        <ng-container matColumnDef="companyName">
          <th
            mat-header-cell
            *matHeaderCellDef
            class="f-w-600 mat-subtitle-1 f-s-14"
          >
            Company
          </th>
          <td mat-cell *matCellDef="let element" class="mat-body-1">
            {{ element.phoneNumber }}
          </td>
        </ng-container>

        <!-- Customer email Column -->
        <ng-container matColumnDef="contactPersonEmail">
          <th
            mat-header-cell
            *matHeaderCellDef
            class="f-w-600 mat-subtitle-1 f-s-14"
          >
          Email
          </th>
          <td mat-cell *matCellDef="let element" class="mat-body-1">
            {{ element.emailAddress }}
          </td> 
        </ng-container>

        <!--  Customer Phone Number -->
        <ng-container matColumnDef="contactPersonPhoneNumber">
          <th
            mat-header-cell
            *matHeaderCellDef
            class="f-w-600 mat-subtitle-1 f-s-14"
          >
            Phone
          </th>
          <td mat-cell *matCellDef="let element" class="mat-body-1">
            {{ element.phoneNumber }}
          </td>
        </ng-container>

          <!-- Company VAT Number Column -->
          <ng-container matColumnDef="companyVATNumber">
          <th
            mat-header-cell
            *matHeaderCellDef
            class="f-w-600 mat-subtitle-1 f-s-14"
          >
          VAT Number
          </th>
          <td mat-cell *matCellDef="let element" class="mat-body-1">
            {{ element.VATNumber }}
          </td>
        </ng-container>

        <!-- Company Physical Address Column -->
        <ng-container matColumnDef="companyBillingAddress">
          <th
            mat-header-cell
            *matHeaderCellDef
            class="f-w-600 mat-subtitle-1 f-s-14"
          >
          Address
          </th>
          <td mat-cell *matCellDef="let element" class="mat-body-1">
            {{ element.billingAddress }}
          </td>
        </ng-container>

        <!-- Action Column -->
        <ng-container matColumnDef="actionButton">
          <th
            mat-header-cell
            *matHeaderCellDef
            class="f-w-600 mat-subtitle-1 f-s-14"
          > </th>
          <td mat-cell *matCellDef="let element" class="mat-body-1">
            <button color="primary" (click)="editCompanyDetails(element)" mat-mini-fab>
              <mat-icon>edit_square</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    </div>
  </mat-card-content>
</mat-card>



 