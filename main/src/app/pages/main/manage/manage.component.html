<mat-card *ngIf="editMode" class="cardWithShadow">
  <ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" size = "medium" color = "#fff" type = "ball-atom" [fullScreen] = "true"><p style="color: white" > Loading... </p></ngx-spinner>
  <mat-card-content class="p-24">
    <mat-card-title class=" b-b-1">
      <div class="row">
        <div class="col-8 col-md-6 title"> 
          <h3>Edit Customers</h3>
        </div>
        <div class="col-4 col-md-6 align-end btn-group">
            <button mat-raised-button color="primary" 
              class="m-t-12 m-b-12 m-r-3" 
              [disabled]="!customerForm?.valid"
              (click)="addCustomer()">Save</button>
          <button mat-raised-button  color="warn" class="m-t-12 m-b-12" (click)="cancelEditCustomer()">Cancel</button>
        </div>
      </div>
    </mat-card-title>

  
    <form [formGroup]="customerForm"> 
      <div class="row m-t-32">
        <div class="col-md-3">
          <h4 class="w-100">Company Info</h4>
        </div>

        <div class="col-md-5">
          <mat-form-field class="w-100" appearance="outline">
            <mat-label>Company Name</mat-label>
            <input matInput type="text" formControlName="companyName">
            <mat-hint class="error" *ngIf="customerForm?.get('companyName')?.invalid && customerForm?.get('companyName')?.touched">
              *Company Name is required
            </mat-hint>
          </mat-form-field>
        </div>
        <div class="col-md-4">
          <mat-form-field class="w-100" appearance="outline">
            <mat-label>VAT Number</mat-label>
            <input matInput type="text" formControlName="companyVATNumber">
            <mat-hint class="error" *ngIf="customerForm?.get('companyVATNumber')?.invalid && customerForm?.get('companyVATNumber')?.touched">
              *VAT Number is required
            </mat-hint>
          </mat-form-field>
        </div>
      </div> 

      <div class="row m-t-12">
        <div class="col-md-3">
          <h4 class="w-100">Contact Person</h4>
        </div> 

        <div class="col-md-2">
          <mat-form-field class="w-100" appearance="outline">
            <mat-label>Title</mat-label>
            <select matNativeControl required formControlName="contactPersonTitle">
              <option *ngFor="let val of titles" value="{{val}}">{{val}}</option> 
            </select>
            
          </mat-form-field>
        </div> 

        
        <div class="col-md-4">
          <mat-form-field class="w-100" appearance="outline">
            <mat-label>First Name</mat-label>
            <input matInput type="text" formControlName="contactPersonFirstName">
            <mat-hint class="error" *ngIf="customerForm?.get('contactPersonFirstName')?.invalid && customerForm?.get('contactPersonFirstName')?.touched">
              *First name is required
            </mat-hint>
          </mat-form-field>
        </div> 

        <div class="col-md-3">
          <mat-form-field class="w-100" appearance="outline">
            <mat-label>Last Name</mat-label>
            <input matInput type="text" formControlName="contactPersonLastName">
            <mat-hint class="error" *ngIf="customerForm?.get('contactPersonLastName')?.invalid && customerForm?.get('contactPersonLastName')?.touched">
              *Last name is required
            </mat-hint>
          </mat-form-field>
        </div> 
      </div>

      <div class="row m-t-12">
        <div class="col-md-3">
          <h4 class="w-100">Email Address</h4>
        </div>

        <div class="col-md-9">
          <mat-form-field class="w-100" appearance="outline">
            <mat-label>Email Address</mat-label>
            <input matInput type="email" formControlName="contactPersonEmail">
            <mat-hint class="error" *ngIf="customerForm?.get('contactPersonEmail')?.invalid && customerForm?.get('contactPersonEmail')?.touched">
              *Email address is required
            </mat-hint>
          </mat-form-field>
        </div>
      </div>

      <div class="row m-t-12">
        <div class="col-md-3">
          <h4 class="w-100">Phone Number</h4>
        </div>

        <div class="col-md-9">
          <mat-form-field class="w-100" appearance="outline">
            <mat-label>Phone Number</mat-label>
            <input matInput type="text" formControlName="contactPersonPhoneNumber">
            <mat-hint class="error" *ngIf="customerForm?.get('contactPersonPhoneNumber')?.invalid && customerForm?.get('contactPersonPhoneNumber')?.touched">
              *Phone number is required
            </mat-hint>
          </mat-form-field>
        </div>
      </div>

      <div class="row m-t-12">
        <div class="col-md-3">
          <h4 class="w-100">Company Address</h4>
        </div>

        <div class="col-md-4">
          <mat-form-field class="w-100" appearance="outline">
            <mat-label>Billing Address</mat-label>
            <textarea matInput rows="5" formControlName="companyBillingAddress"></textarea>
            <mat-hint class="error" *ngIf="customerForm?.get('companyBillingAddress')?.invalid && customerForm?.get('companyBillingAddress')?.touched">
              *Billing address is required
            </mat-hint>
          </mat-form-field>
          <mat-checkbox color="primary" (change)="copyShippingAddress($event.checked)">Shipping address is the same as Biling Address</mat-checkbox>
        </div>

        <div class="col-md-5">
          <mat-form-field class="w-100" appearance="outline">
            <mat-label>Shipping Address</mat-label>
            <textarea matInput rows="5" formControlName="companyShippingAddress"></textarea>
            <mat-hint class="error" *ngIf="customerForm?.get('companyShippingAddress')?.invalid && customerForm?.get('companyShippingAddress')?.touched">
              *Shipping address is required
            </mat-hint>
          </mat-form-field>
        </div>
      </div>


    </form>



  </mat-card-content>
</mat-card>


<mat-card *ngIf="!editMode" class="cardWithShadow">
  <mat-card-content class="p-24">
    <mat-card-title class=" b-b-1">
      <div class="row">
        <div class="col-md-9 col-sm-6 title"> <h3>Edit Customers</h3></div>
        <div class="col-md-3 col-sm-6 align-end">
          <button mat-raised-button color="primary" class="m-t-12 m-b-12" (click)="addNewCustomer()">Add Customer</button>
        </div>
      </div>
    </mat-card-title>
    
    <div class="table-responsive m-t-16">
      <table mat-table [dataSource]="customers" class="w-100">
        <!-- Logo Column -->
        <ng-container matColumnDef="companyLogo">
          <th
            mat-header-cell
            *matHeaderCellDef
            class="f-w-600 mat-subtitle-1 f-s-14"
          >
            Logo
          </th>
          <td mat-cell *matCellDef="let element">
            <div class="d-flex align-items-center">
              <img
                src="../../../../assets/images/customers/customer-1.svg"
                alt="users"
                width="60"
              />
            </div>
          </td>
        </ng-container>

        <!-- Full name Column --> 
        <ng-container matColumnDef="contactPersonName">
          <th
            mat-header-cell
            *matHeaderCellDef
            class="f-w-600 mat-subtitle-1 f-s-14"
          >
          Name
          </th>
          <td mat-cell *matCellDef="let element" class="mat-body-1">
            {{ element.contactPersonTitle }} {{ element.contactPersonFirstName }} {{ element.contactPersonLastName }}
          </td>
        </ng-container>

        <!-- Company Name Column -->
        <ng-container matColumnDef="companyName">
          <th
            mat-header-cell
            *matHeaderCellDef
            class="f-w-600 mat-subtitle-1 f-s-14"
          >
            Company
          </th>
          <td mat-cell *matCellDef="let element" class="mat-body-1">
            {{ element.companyName }}
          </td>
        </ng-container>

        <!-- Customer email Column -->
        <ng-container matColumnDef="contactPersonEmail">
          <th
            mat-header-cell
            *matHeaderCellDef
            class="f-w-600 mat-subtitle-1 f-s-14"
          >
          Email
          </th>
          <td mat-cell *matCellDef="let element" class="mat-body-1">
            {{ element.contactPersonEmail }}
          </td> 
        </ng-container>

        <!--  Customer Phone Number -->
        <ng-container matColumnDef="contactPersonPhoneNumber">
          <th
            mat-header-cell
            *matHeaderCellDef
            class="f-w-600 mat-subtitle-1 f-s-14"
          >
            Phone
          </th>
          <td mat-cell *matCellDef="let element" class="mat-body-1">
            {{ element.contactPersonPhoneNumber }}
          </td>
        </ng-container>

          <!-- Company VAT Number Column -->
          <ng-container matColumnDef="companyVATNumber">
          <th
            mat-header-cell
            *matHeaderCellDef
            class="f-w-600 mat-subtitle-1 f-s-14"
          >
          VAT Number
          </th>
          <td mat-cell *matCellDef="let element" class="mat-body-1">
            {{ element.companyVATNumber }}
          </td>
        </ng-container>

        <!-- Company Physical Address Column -->
        <ng-container matColumnDef="companyBillingAddress">
          <th
            mat-header-cell
            *matHeaderCellDef
            class="f-w-600 mat-subtitle-1 f-s-14"
          >
          Address
          </th>
          <td mat-cell *matCellDef="let element" class="mat-body-1">
            {{ element.companyBillingAddress }}
          </td>
        </ng-container>

        <!-- Action Column -->
        <ng-container matColumnDef="actionButton">
          <th
            mat-header-cell
            *matHeaderCellDef
            class="f-w-600 mat-subtitle-1 f-s-14"
          > </th>
          <td mat-cell *matCellDef="let element" class="mat-body-1">
            <button color="primary" (click)="editCustomerDetails(element)" mat-mini-fab>
              <mat-icon>edit_square</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    </div>
  </mat-card-content>
</mat-card>



 